CryptoSignal Suite Analyst: READMEProject OverviewThe CryptoSignal Suite Analyst is a robust backend application designed to provide real-time cryptocurrency market analysis and trading signals. It integrates a sophisticated Natural Language Processing (NLP) handler with a WebSocket API, allowing for interactive chat-based queries and seamless integration with frontend web applications. The system is built to assist users with various crypto-related insights, from market data fetching to sentiment analysis and anomaly detection.Key FeaturesReal-time Market Data: Fetch current and historical market data for various cryptocurrencies.Technical Analysis: Perform comprehensive technical analysis using popular indicators.Pattern Recognition: Identify candlestick and chart patterns for trading insights.Sentiment Analysis: Gauge market mood and social sentiment for informed decisions.Macroeconomic Analysis: Analyze the impact of global economic indicators on crypto markets.Signal Generation: Generate actionable trading signals (e.g., BUY, SELL, HOLD).Anomaly Detection: Detect unusual market activities, including potential pump and dump schemes.Interactive Chat Interface: Engage with the system through a natural language chat interface.WebSocket API: Provides a real-time, persistent connection for frontend applications.Configurable LLM Integration: Utilizes a Large Language Model (LLM) (e.g., Meta-Llama 4 Maverick) for dynamic conversation and intent detection, with fallback to keyword-based detection if LLM is unavailable.Conversation History Management: Maintains chat history for contextual understanding and saves it to a JSON file.Core ComponentsThe project is composed of two primary Python modules:main_websocket_api.py:This module serves as the WebSocket integration layer for the chat application. It uses FastAPI to expose WebSocket endpoints, enabling real-time communication with connected clients (e.g., a web frontend). It manages user connections, chat sessions, and handles incoming messages by routing them to the NLP handler for processing. It also defines Pydantic models for various WebSocket message types (e.g., ClientSendMessage, ServerChatMessage).trading_assistant_nlp_handler.py:This module is the brain of the CryptoSignal Suite. It handles all Natural Language Processing tasks, including intent detection, entity extraction (like coin symbols), and orchestrating calls to various analytical sub-modules (e.g., MarketDataFetcher, TechnicalAnalyzer, SignalGenerator, AnomalyDetector). It interacts with an external LLM API (OpenRouter) for advanced conversational capabilities and generates human-readable responses based on the analysis performed. It also manages conversation history and loads configurations from a credentials.yaml file and environment variables.Intent RecognitionThe trading_assistant_nlp_handler.py module supports a variety of intents, including:generate_signalexplain_signalfetch_market_dataanalyze_indicatorsanalyze_patternsanalyze_sentimentanalyze_macroworld_economycrypto_generalpersonal_conversationcasual_chatanalyze_anomaliesfetch_macro_newstell_jokestart_conversationcompliment_receivedfarewellunknownArchitectureThe system follows a client-server architecture:Frontend (Client): A web application (not included in these files but can be plugged in) connects to the backend via WebSocket.main_websocket_api.py (Backend Gateway): Manages WebSocket connections, user sessions, and routes user queries to the NLP handler.trading_assistant_nlp_handler.py (NLP and Analysis Core): Processes natural language inputs, performs analysis, and generates responses. It integrates with various internal analysis modules and external LLM services.Setup and InstallationPrerequisitesPython 3.8+pip (Python package installer)Project Structure (Assumed)The trading_assistant_nlp_handler.py file indicates a PROJECT_ROOT of /storage/emulated/0/Android/data/ru.iiec.pydroid3/files/cryptsignal and imports modules from src/data, src/analysis, src/signal_generation, and utils. 
Environment VariablesThe application can be configured using environment variables. It is recommended to set these for production deployments.LOG_LEVEL: (Optional) Sets the logging level for main_websocket_api.py (e.g., INFO, DEBUG, WARNING, ERROR). Default is INFO.MAX_HISTORY_PER_CHAT_SESSION: (Optional) Maximum number of messages to store per chat session. Default is 100.MAX_CONCURRENT_CONNECTIONS_PER_USER: (Optional) Maximum number of concurrent WebSocket connections allowed per user. Default is 5.APPLICATION_ROOT_PATH: (Optional) Base path for the FastAPI application if deployed under a subpath. Default is "".OPENROUTER_API_KEY: (Required for LLM features) Your API key for the OpenRouter service. This can also be set in config/credentials.yaml.config/credentials.yaml ConfigurationCreate a config directory in your PROJECT_ROOT and add a credentials.yaml file. This file can be used to store your OpenRouter API key, SerpAPI Key, CryptoPanic API Key, Alphavantage key and other configuration parameters.Example credentials.yaml:openrouter:
  api_key: "your_openrouter_api_key_here"

llm_params:
  model: "meta-llama/llama-4-maverick:free"
  max_tokens: 1024
  temperature: 0.7
  top_p: 0.9

nlp_handler:
  typing_delay: 0.02
  verbose: true
  max_history_for_intent: 3
  use_llm_for_intent: false # Set to true to use LLM for intent detection
  initial_welcome_message: "Hey there! I'm your crypto trading assistant. How can I help?"

module_defaults:
  default_symbol: "BTC"
  default_exchange: "binance"
  default_timeframe: "2h"
  default_limit: 600
DependenciesInstall the necessary Python packages using pip. Create a requirements.txt file with the following (based on imports):fastapi
uvicorn
websockets
pydantic
pyyaml
pandas
requests
# asyncio (usually built-in)
# typing (usually built-in)
# datetime (usually built-in)
Then install them:pip install -r requirements.txt
Running the ApplicationEnsure trading_assistant_nlp_handler.py can be imported:The main_websocket_api.py file attempts to import TradingAssistantNLPHandler directly. Ensure trading_assistant_nlp_handler.py is in your Python path or the same directory as main_websocket_api.py.Start the application:Navigate to the directory containing main_websocket_api.py and run it using Uvicorn:python main_websocket_api.py
The application will start with Uvicorn, typically accessible at http://127.0.0.1:8000 (or http://localhost:8000).You will see a log message indicating the application started from "Port Harcourt, Nigeria".API EndpointsWebSocket Endpoint/ws/{user_id}:This is the primary WebSocket endpoint. Clients can connect to this endpoint to interact with the CryptoSignal Assistant.Example: ws://localhost:8000/ws/your_unique_user_idMessage Types for WebSocket Communication:Client to Server:send_message: Send a text message to the assistant.switch_chat: Switch to an existing chat session.start_new_chat: Initiate a new chat session.get_all_chats: Request a list of all existing chat sessions for the user.Server to Client:new_message: A new message from the assistant or user in a chat.chat_history: Historical messages for a specific chat session.chat_switched: Confirmation of chat switch, including the new chat's history.chat_started: Confirmation of a new chat being started, with its initial history.all_chats_list: A list of all chat sessions for the current user.system_message: General system messages (e.g., notifications, info).error: Error messages from the server.HTTP Endpoints/health:A simple health check endpoint to verify the API's status. It returns {"status": "ok", "timestamp": "...", "location": "Port Harcourt, Nigeria"}.Integration with FrontendThe WebSocket API is designed for easy integration with any frontend web application that supports WebSocket connections. The defined Pydantic models for WebSocket messages (ClientSendMessage, ServerChatMessage, etc.) provide a clear contract for communication between the frontend and backend.The application also includes CORS middleware, which can be configured for frontend development to allow cross-origin requests.Direct Access via trading_assistant_nlp_handler.pyWhile primarily designed for the WebSocket API, the TradingAssistantNLPHandler can also be accessed directly for testing or command-line interaction. The if __name__ == "__main__": block in trading_assistant_nlp_handler.py contains a main_interaction_loop that allows for direct console interaction with the NLP handler.To run the NLP handler directly (for development/testing of NLP features):python trading_assistant_nlp_handler.py
This will start a console-based interaction loop, allowing you to type queries and see the NLP handler's responses directly.LoggingBoth main_websocket_api.py and trading_assistant_nlp_handler.py are configured with robust logging. Logs are printed to the console and, for the NLP handler, also saved to a file (logs/trading_assistant_nlp.log within your PROJECT_ROOT). This helps in monitoring the application and debugging issues.Contributing(This section is a placeholder. You can expand it with guidelines for contributions.)We welcome contributions to the CryptoSignal Suite Analyst! Please feel free to open issues or submit pull requests.License(This section is a placeholder. You can specify your project's license here.)